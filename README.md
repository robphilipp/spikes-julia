# Spikes-Julia

# Developing and using Spikes
First you need to go to the `~/code/analysis/julia/Spikes` directory. Then start up julia from there Code for analyzing Spikes output.

```julia
π> cd ~/code/analytics/julia/Spikes
π> julia
```
Then once in julia, you'll need to activate the project from the package manager. By doing this, 
you can add dependencies and remove dependencies from the project.

```julia
julia> ]
(1.0) pkg> activate .
(Spikes) pkg>
```

Then hit the delete key or ctl^c to exit the package manager.

```julia
julia> using Spikes
julia> using Plots
julia> plotly()
julia> logs = Spikes.loadLogFileSeries("/Users/rob/code/spikes/test-output/", "neuron-activity.%n.log", [1,2,3,4,5,6,7,8,9,10])
Loading neuron-activity.1.log...
Loading neuron-activity.2.log...
Loading neuron-activity.3.log...
Loading neuron-activity.4.log...
Loading neuron-activity.5.log...
Loading neuron-activity.6.log...
Loading neuron-activity.7.log...
Loading neuron-activity.8.log...
Loading neuron-activity.9.log...
Loading neuron-activity.10.log...
Dict{Integer,Array{String,N} where N} with 10 entries:
  7  => ["spiked_system-7 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-7 - topology; neuron_id: out-1…
  4  => ["spiked_system-4 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-4 - topology; neuron_id: out-1…
  9  => ["spiked_system-9 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-9 - topology; neuron_id: out-1…
  10 => ["spiked_system-10 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-10 - topology; neuron_id: out…
  2  => ["spiked_system-2 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-2 - topology; neuron_id: out-1…
  3  => ["spiked_system-3 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-3 - topology; neuron_id: out-1…
  5  => ["spiked_system-5 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-5 - topology; neuron_id: out-1…
  8  => ["spiked_system-8 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-8 - topology; neuron_id: out-1…
  6  => ["spiked_system-6 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-6 - topology; neuron_id: out-1…
  1  => ["spiked_system-1 - summary; input_neurons: 0; hidden_neurons: 6; output_neurons: 0", "spiked_system-1 - topology; neuron_id: out-1…

julia> ws = Spikes.eventSeriesFrom(logs, Spikes.learningEvents)
Dict{Integer,DataFrames.DataFrame} with 10 entries:
  7  => 1660×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  4  => 1734×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  9  => 1628×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  10 => 1606×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  2  => 1816×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  3  => 1808×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  5  => 1740×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  8  => 1630×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  6  => 1678×8 DataFrames.DataFrame. Omitted printing of 4 columns…
  1  => 1842×8 DataFrames.DataFrame. Omitted printing of 4 columns…

julia> Spikes.plotSeries(ws, Spikes.plotWeights)
julia> Spikes.plotSeries(ws, Spikes.plotWeights, xAxisLabel="t (ms)", yAxisLabel="w(t)", title="Connection Weights")
julia> Spikes.plotSeries(ws, Spikes.plotWeights, title="Connection Weights")
```

And this should (after an initial delay) throw the series of plots to a browser window. Note that

```julia
julia> typeof(ws)
Dict{Integer,DataFrames.DataFrame}
```

And similarly
```julia
julia> Spikes.plotSeries(mp, Spikes.plotMembranePotential)
julia> Spikes.plotSeries(mp, Spikes.plotMembranePotential, xAxisLabel="t (ms)", yAxisLabel="u(t) (mV)", title="Membrane Potential")
julia> Spikes.plotSeries(mp, Spikes.plotMembranePotential, yAxisLabel="u(t) (mV)")
```
will throw a the simulation series to the browser, where

```julia
julia> typeof(mp)
Dict{Integer,DataFrames.DataFrame}
```
which was loaded into the dictionary with

```julia
julia> mp = Spikes.eventSeriesFrom(logs, Spikes.membranePotentialEvents)
Dict{Integer,DataFrames.DataFrame} with 10 entries:
  7  => 1514×5 DataFrames.DataFrame…
  4  => 1594×5 DataFrames.DataFrame…
  9  => 1481×5 DataFrames.DataFrame…
  10 => 1454×5 DataFrames.DataFrame…
  2  => 1659×5 DataFrames.DataFrame…
  3  => 1634×5 DataFrames.DataFrame…
  5  => 1573×5 DataFrames.DataFrame…
  8  => 1491×5 DataFrames.DataFrame…
  6  => 1525×5 DataFrames.DataFrame…
  1  => 1691×5 DataFrames.DataFrame…
```

And to parse out the spike events
```julia
julia> se = Spikes.eventSeriesFrom(logs, Spikes.spikeEvents)
Dict{Integer,DataFrames.DataFrame} with 10 entries:
  7  => 907×4 DataFrames.DataFrame…
  4  => 955×4 DataFrames.DataFrame…
  9  => 888×4 DataFrames.DataFrame…
  10 => 871×4 DataFrames.DataFrame…
  2  => 995×4 DataFrames.DataFrame…
  3  => 979×4 DataFrames.DataFrame…
  5  => 943×4 DataFrames.DataFrame…
  8  => 894×4 DataFrames.DataFrame…
  6  => 914×4 DataFrames.DataFrame…
  1  => 1015×4 DataFrames.DataFrame…
```
and the plot them